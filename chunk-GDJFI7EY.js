import{d as u}from"./chunk-SO6VPFYA.js";var b,d,c,h,v=u(()=>{"use strict";b=typeof WeakRef<"u",d=class{constructor(e,t=!1,s,r){this.initialize(e,t,s,r)}initialize(e,t=!1,s,r){return this.mask=e,this.skipNextObservers=t,this.target=s,this.currentTarget=r,this}},c=class{constructor(e,t,s=null){this.callback=e,this.mask=t,this.scope=s,this._willBeUnregistered=!1,this.unregisterOnNextCall=!1,this._remove=null}remove(){this._remove&&this._remove()}},h=class n{static FromPromise(e,t){let s=new n;return e.then(r=>{s.notifyObservers(r)}).catch(r=>{if(t)t.notifyObservers(r);else throw r}),s}get observers(){return this._observers}constructor(e,t=!1){this.notifyIfTriggered=t,this._observers=new Array,this._numObserversMarkedAsDeleted=0,this._hasNotified=!1,this._eventState=new d(0),e&&(this._onObserverAdded=e)}add(e,t=-1,s=!1,r=null,l=!1){if(!e)return null;let i=new c(e,t,r);i.unregisterOnNextCall=l,s?this._observers.unshift(i):this._observers.push(i),this._onObserverAdded&&this._onObserverAdded(i),this._hasNotified&&this.notifyIfTriggered&&this._lastNotifiedValue!==void 0&&this.notifyObserver(i,this._lastNotifiedValue);let a=b?new WeakRef(this):{deref:()=>this};return i._remove=()=>{let _=a.deref();_&&_._remove(i)},i}addOnce(e){return this.add(e,void 0,void 0,void 0,!0)}remove(e){return e?(e._remove=null,this._observers.indexOf(e)!==-1?(this._deferUnregister(e),!0):!1):!1}removeCallback(e,t){for(let s=0;s<this._observers.length;s++){let r=this._observers[s];if(!r._willBeUnregistered&&r.callback===e&&(!t||t===r.scope))return this._deferUnregister(r),!0}return!1}_deferUnregister(e){e._willBeUnregistered||(this._numObserversMarkedAsDeleted++,e.unregisterOnNextCall=!1,e._willBeUnregistered=!0,setTimeout(()=>{this._remove(e)},0))}_remove(e,t=!0){if(!e)return!1;let s=this._observers.indexOf(e);return s!==-1?(t&&this._numObserversMarkedAsDeleted--,this._observers.splice(s,1),!0):!1}makeObserverTopPriority(e){this._remove(e,!1),this._observers.unshift(e)}makeObserverBottomPriority(e){this._remove(e,!1),this._observers.push(e)}notifyObservers(e,t=-1,s,r,l){if(this.notifyIfTriggered&&(this._hasNotified=!0,this._lastNotifiedValue=e),!this._observers.length)return!0;let i=this._eventState;i.mask=t,i.target=s,i.currentTarget=r,i.skipNextObservers=!1,i.lastReturnValue=e,i.userInfo=l;for(let a of this._observers)if(!a._willBeUnregistered&&(a.mask&t&&(a.unregisterOnNextCall&&this._deferUnregister(a),a.scope?i.lastReturnValue=a.callback.apply(a.scope,[e,i]):i.lastReturnValue=a.callback(e,i)),i.skipNextObservers))return!1;return!0}notifyObserver(e,t,s=-1){if(this.notifyIfTriggered&&(this._hasNotified=!0,this._lastNotifiedValue=t),e._willBeUnregistered)return;let r=this._eventState;r.mask=s,r.skipNextObservers=!1,e.unregisterOnNextCall&&this._deferUnregister(e),e.callback(t,r)}hasObservers(){return this._observers.length-this._numObserversMarkedAsDeleted>0}clear(){for(;this._observers.length;){let e=this._observers.pop();e&&(e._remove=null)}this._onObserverAdded=null,this._numObserversMarkedAsDeleted=0,this.cleanLastNotifiedState()}cleanLastNotifiedState(){this._hasNotified=!1,this._lastNotifiedValue=void 0}clone(){let e=new n;return e._observers=this._observers.slice(0),e}hasSpecificMask(e=-1){for(let t of this._observers)if(t.mask&e||t.mask===e)return!0;return!1}}});var f,g=u(()=>{"use strict";v();f=class{static get LastCreatedEngine(){return this.Instances.length===0?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}};f.Instances=[];f.OnEnginesDisposedObservable=new h;f._LastCreatedScene=null;f.UseFallbackTexture=!0;f.FallbackTexture=""});var o,x=u(()=>{"use strict";o=class n{static SetMatrixPrecision(e){if(n.MatrixTrackPrecisionChange=!1,e&&!n.MatrixUse64Bits&&n.MatrixTrackedMatrices)for(let t=0;t<n.MatrixTrackedMatrices.length;++t){let s=n.MatrixTrackedMatrices[t],r=s._m;s._m=new Array(16);for(let l=0;l<16;++l)s._m[l]=r[l]}n.MatrixUse64Bits=e,n.MatrixCurrentType=n.MatrixUse64Bits?Array:Float32Array,n.MatrixTrackedMatrices=null}};o.MatrixUse64Bits=!1;o.MatrixTrackPrecisionChange=!0;o.MatrixCurrentType=Float32Array;o.MatrixTrackedMatrices=[]});export{d as a,c as b,h as c,v as d,f as e,g as f,o as g,x as h};
